# 一、核心问题
## 1 一致性问题
**定义**： **一致性**（agreement），是指对于分布式系统中的多个服务节点，给定一系列操作，在约定协议的保障下，试图使得它们对处理结果达成“某种程度”的认同。

**问题和挑战**：

1. 节点之间的网络通信是不可靠的，消息延迟、乱序和内容错误等
2. 节点的处理时间无法保障
3. 同步调用可以简化设计，但是会严重降低可扩展性，甚至退化成单点系统

当前思路：将可能引发不一致性的并行操作进行串行化。 而且大都是假设请求答复消息不失败的前提下。

**一致性要求**：

1. 可终止性  ——有限时间能完成
2. 约同性 ——决策是相同的
3. 合法性 ——决策必须是某个节点提出的

**带约束性的一致性**

1. 顺序一致性
2. 线性一致性

强一致性很难满足，一般要求最终一致性

## 共识算法

**问题和挑战**
1. 出现故障，但不会伪造——非拜占庭错误
2. 伪造信息——拜占庭错误，对应节点就是拜占庭节点。

**常见算法**

1. 针对非拜占庭错误 CFT：
   * Paxos
   * Raft
   * 及其变种
2. 针对拜占庭错误 BFT：
   * PBFT为代表的确定性系列算法
    > 共识是最终结果
   * PoW为代表的概率算法
    > 共识可能只是临时的，随着时间推移，被推翻的概率越来越小
3. XFT，结合

## FLP不可能原理

## CAP原理

## ACID原则

## Paxos算法与Raft算法

## 拜占庭问题及其算法