
# Hash
## 定义
Hash(哈希、散列):能将任意长度的二进制明文映射为较短的（通常是固定长度的）二进制串（Hash值），不同明文很难映射为相同的Hash值（抗碰撞）。

Hash值在应用在常被成为 **指纹**（fingerprint）或 **摘要**（digest）。

优秀的Hash算法的一些特性：
- 正向快速：给定明文和Hash算法，在有限时间和优秀资源内能计算得到Hash值；
- 逆向困难：给定Hash值，在有限时间内很难递推出明文；
- 输入敏感：原始输入信息修改一点点，新产生的Hash值都应该出现很大不同；
- 冲突避免（抗碰撞）：很难找到两段不同内容的明文，使得它们产生的Hash值相同。

## 常见算法
- MD4：MIT的R.L.R 1990年设计，MD是Message Digest的缩写。输出128位。
- MD5：1991作者改进。
- SHA（secure hash algorithm），是一个Hash函数族，NIST于1993实现，有SHA-1，SHA-224、SHA-256、SHA-384、SHA-512（统称SHA-2）。SHA-3也被提出。

 **计算敏感**：
计算资源（CPU越快）越快，Hash值算得越快，可以通过增加算力进行攻击。上面是MD、SHA都是这类。

**不是计算敏感**：scrypt算法，计算需要大量的内存资源，用来避免算力攻击。

## 数字摘要
**定义**：对数字内容进行Hash运算，获得唯一的摘要值来指代原始完整的数字内容。可以解决 **确保内容未被篡改**的问题。

## Hash攻击和防护
Hash算法并不是一种加密算法，不能用于对信息的保护。

常被用在对口令的保存上，后台数据库存的就是口令的Hash值，用户输入口令（也就是密码），后台直接计算其Hash值（Hash算法固定的），进行比对就行，数据库泄露了也不怕。（当然，太简单的密码，黑客是可以直接计算出hash值，作为字典，进行字典攻击或彩虹表攻击，暴力破解的。）

为了防范这一类攻击，一般采用 **加盐**的方法。保存口令明文加上一段随机字符串（所谓的“盐”）之后的Hash值。 Hash结果和“盐”分别存放在不同的地方。

# 加解密算法

## 以前的

### 凯撒密码

## 对称加密
特点：
- 加解密的秘钥相同
- 计算效率高、加密强度高
- 需要提前共享秘钥——易泄露

代表算法：
- DES、3DES
- AES
- IDEA

## 非对称加密
特点：
- 加解密秘钥分为公钥、私钥，互相加密解密。
- 无需提前共享秘钥
- 计算效率低，仍存在中间人攻击可能

代表算法：
- RSA
- ElGamal
- 椭圆曲线系列（ECC）
- SM2、SM3（我国的商密，基于RSA）

# 消息认证码与数字签名
对消息的摘要进行加密，可以被应用到 **消息防篡改** 和 **身份证明**。

## 消息认证码
消息认证码：HMAC（Hash-based Message Authentication Code）基于Hash的消息认证码。

基于 **对称加密**。

基本过程：


## 数字签名

基于 **非对称加密**。

# 数字证书 和 PKI体系

## 数字证书

## X.509证书规范

**证书格式**

**证书信任链**

## PKI体系

### PKI基本组件
- CA（Certification Authority) :负责证书的 **颁发** 和 **吊销**，接收来自RA的请求，是最核心的部分。
- RA（Registration Authority）:对 **用户身份记性验证**，**校验数据合法性**，负责 **登记**，审核过了就发给CA。
- 证书数据库：存放证书，多采用X.500系列标准格式。

**证书的签发**：

**证书的撤销**：

# Merkel树结构

定义：默克尔树，

特点：
- 快速比较大量数据
- 快速定位修改
- 零知识证明

# Bloom Filter结构

# 同态加密

加密数据进行处理后的结果后解密，跟明文数据处理后的结果一样。
> `E(X $ Y) = E(X) $ E(Y)`
>运算符 $,可以是加法、乘法、除法、减法。满足加法、乘法的叫做全同态（代数同态），四种全满足的叫做算数同态。满足某一个的叫做特定同态。

- 1978年同态加密问题提出，第一个全同态2009年被提出并证明（基于理想格的）。
- 仅满足加法同态：Paillier、Benaloh算法；
- 仅满足乘法同态：RSA、ElGamal算法。

应用在云环境下，外包计算等等。

目前全同态的加密方案主要包括三种类型：
1. 基于理想格（ideal lattice）的方案：公钥大小约为2.3GB，刷新密文处理时间要十几分钟。
2. 基于整数上近似GCD问题的方案：公钥大小降至几十MB量级
3. 基于带扰动学习问题的方案：多密钥全同态加密方案，接近实时多方安全计算的需求。

# 函数加密
对处理函数进行加密保护，不过目前仅能做到对某个特定函数的一个密钥的方案。

# 零知识证明
解释：证明者在不向验证者透露任何额外信息的前提下，使验证者相信某个论断是正确的。

需要满足三个条件：
- 完整性： 真实的证明可以让验证者成功验证。
- 可靠性： 虚假的证明无法让验证者保证通过验证，不过允许存在小概率的例外
- 零知识： 如果得到证明，无法从证明过程中获得除了所证明信息之外的任何信息。

# 量子密码学

基本原理是利用量子比特可以同时处于多个相干叠加态，理论上可以同时用少量量子比特来表达大量的信息，并同时进行处理，大大提高计算速度。理论上可以解决大数因子分解计算速度。